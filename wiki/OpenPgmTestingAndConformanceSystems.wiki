#summary Test systems
#labels Phase-QA

== Application ==
<dl><dt>Purpose</dt><dd>Runs the PGM network stack to test. This is implemented as a thin agnostic layer above the API allowing control and feedback to the tester. 
</dd><dt>Syntax</dt><dd>
<pre>
 app `[`-n _network_`]` 
     `[`-s _service_`]`
</pre>
</dd><dt>Remarks</dt><dd>Control is provided by standard input with feedback to standard output, the available commands follow in alphabetical order.  After an input command is processed and is ready to accept another command the output "<tt>READY</tt>" is displayed.
</dd></dl>

=== bind ===
<dl><dt>Syntax</dt><dd>
<pre>
 bind _session_name_ 
</pre>
</dd><dt>Purpose</dt><dd>Bind a transport to the network.
</dd><dt>Remarks</dt><dd>The transport must be previously created with the <tt>create</tt> command.

Example output for binding a session called _transport1_:
<pre>
 *create _transport1_* 
 created new session "_transport1_"
 READY
 *bind _transport1_* 
 READY
</pre>
</dd><dt>Parameters</dt><dd>
<table border="1" cellpadding="5" cellspacing="0">
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
<tr>
<td><tt>session_name</tt></td>
<td>The transport identifier.</td>
</tr>
</table>
</dd></dl>

=== create ===
<dl><dt>Syntax</dt><dd>
<pre>
 create _session_name_ 
</pre>
</dd><dt>Purpose</dt><dd>Create a new transport.
</dd><dt>Remarks</dt><dd>Example output for creating a new transport session called _transport1_:
<pre>
 *create _transport1_* 
 created new session "_transport1_"
 READY
</pre>
</dd><dt>Parameters</dt><dd>
<table border="1" cellpadding="5" cellspacing="0">
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
<tr>
<td><tt>session_name</tt></td>
<td>The transport identifier.</td>
</tr>
</table>
</dd></dl>

=== destroy ===
<dl><dt>Syntax</dt><dd>
<pre>
 destroy _session_name_ 
</pre>
</dd><dt>Purpose</dt><dd>Destroy a transport.
</dd><dt>Remarks</dt><dd>Example output for destroying a session called _transport1_:
<pre>
 *create _transport1_* 
 created new session "_transport1_"
 READY
 *destroy _transport1_* 
 READY
</pre>
</dd><dt>Parameters</dt><dd>
<table border="1" cellpadding="5" cellspacing="0">
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
<tr>
<td><tt>session_name</tt></td>
<td>The transport identifier.</td>
</tr>
</table>
</dd></dl>

=== listen ===
<dl><dt>Syntax</dt><dd>
<pre>
 listen _session_name_ 
</pre>
</dd><dt>Purpose</dt><dd>Listen to data packets on a transport.
</dd><dt>Remarks</dt><dd>Example output for listening to a session called _transport1_:
<pre>
 *create _transport1_* 
 created new session "_transport1_"
 READY
 *bind _transport1_* 
 READY
 *listen _transport1_* 
 READY
</pre>
</dd><dt>Parameters</dt><dd>
<table border="1" cellpadding="5" cellspacing="0">
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
<tr>
<td><tt>session_name</tt></td>
<td>The transport identifier.</td>
</tr>
</table>
</dd></dl>

=== quit ===
<dl><dt>Syntax</dt><dd>
<pre>
 quit
</pre>
</dd><dt>Purpose</dt><dd>Terminates the application and destroy all active transports.  Call to finish a test early, usually upon failure, or at test completion upon success.
</dd><dt>Remarks</dt><dd>Example output with no active transport sessions:
<pre>
 *quit* 
 `*``*` Message: event loop terminated, cleaning up.
 `*``*` Message: destroying sessions.
 unbinding stdin.
 `*``*` Message: finished.
</pre>
</dd></dl>

=== send ===
<dl><dt>Syntax</dt><dd>
<pre>
 send _session_name_ _string_ 
 send _session_name_ _string_ x _repeat_count_ 
</pre>
</dd><dt>Purpose</dt><dd>Send a simple message on the specified bound transport.
</dd><dt>Remarks</dt><dd>The transport must be bound with <tt>bind</tt> command before messages can be sent.  The format restrictions on the _string_ are to simplify output parsing.

Example output for sending the string "_hello_" on the transport session _transport1_:
<pre>
 *send _transport1 hello_* 
 READY
</pre>
To send a large message, or APDU fragmented across multiple packets use the second format:
<pre>
 *send _transport1 goodbye_ x _1000_* 
 READY
</pre>
</dd><dt>Parameters</dt><dd>
<table border="1" cellpadding="5" cellspacing="0">
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
<tr>
<td><tt>session_name</tt></td>
<td>The transport identifier.</td>
</tr><tr>
<td><tt>string</tt></td>
<td>An alphanumeric string to send, must not contain any spaces.</td>
</tr><tr>
<td><tt>repeat_count</tt></td>
<td>Repetitions of <tt>string</tt> to include in the message payload.</td>
</tr>
</table>
</dd></dl>

=== set NAK_BO_IVL ===
<dl><dt>Syntax</dt><dd>
<pre>
 set _session_name_ NAK_BO_IVL _interval_ 
</pre>
</dd><dt>Purpose</dt><dd>Sets <tt>NAK_BO_IVL</tt>, the maximum value of <tt>NAK_RB_IVL</tt>, the back-off interval to wait whilst watching for matching NCFs or NAKs, before publishing a NAK.
</dd><dt>Remarks</dt><dd>Example output:
<pre>
 *create _transport1_* 
 created new session "_transport1_"
 READY
 *set _transport1_ NAK_BO_IVL _50_* 
 READY
 *bind _transport1_* 
 READY
</pre>
</dd><dt>Parameters</dt><dd>
<table border="1" cellpadding="5" cellspacing="0">
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
<tr>
<td><tt>session_name</tt></td>
<td>The transport identifier.</td>
</tr><tr>
<td><tt>interval</tt></td>
<td>Interval in milliseconds.</td>
</tr>
</table>
</dd></dl>

=== set NAK_RPT_IVL ===
<dl><dt>Syntax</dt><dd>
<pre>
 set _session_name_ NAK_RPT_IVL _interval_ 
</pre>
</dd><dt>Purpose</dt><dd>Set <tt>NAK_RPT_IVL</tt>, the interval after sending or receiving a NAK and waiting for a matching NCF.
</dd><dt>Remarks</dt><dd>Example output:
<pre>
 *create _transport1_* 
 created new session "_transport1_"
 READY
 *set _transport1_ NAK_RPT_IVL _2000_* 
 READY
 *bind _transport1_* 
 READY
</pre>
</dd><dt>Parameters</dt><dd>
<table border="1" cellpadding="5" cellspacing="0">
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
<tr>
<td><tt>session_name</tt></td>
<td>The transport identifier.</td>
</tr><tr>
<td><tt>interval</tt></td>
<td>Interval in milliseconds.</td>
</tr>
</table>
</dd></dl>

=== set NAK_RDATA_IVL ===
<dl><dt>Syntax</dt><dd>
<pre>
 set _session_name_ NAK_RDATA_IVL _rate_ 
</pre>
</dd><dt>Purpose</dt><dd>Set <tt>NAK_RDATA_IVL</tt>, the interval between receiving a NCF and waiting for a matching RDATA.
</dd><dt>Remarks</dt><dd>Example output:
<pre>
 *create _transport1_* 
 created new session "_transport1_"
 READY
 *set _transport1_ NAK_RDATA_IVL _2000_* 
 READY
 *bind _transport1_* 
 READY
</pre>
</dd><dt>Parameters</dt><dd>
<table border="1" cellpadding="5" cellspacing="0">
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
<tr>
<td><tt>session_name</tt></td>
<td>The transport identifier.</td>
</tr><tr>
<td><tt>interval</tt></td>
<td>Interval in milliseconds.</td>
</tr>
</table>
</dd></dl>

=== set NAK_NCF_RETRIES ===
<dl><dt>Syntax</dt><dd>
<pre>
 set _session_name_ NAK_NCF_RETRIES _retries_ 
</pre>
</dd><dt>Purpose</dt><dd>Set <tt>NAK_NCF_RETRIES</tt>, the maximum number of times to wait for a NCF before cancelling NAK generation.
</dd><dt>Remarks</dt><dd>Example output:
<pre>
 *create _transport1_* 
 created new session "_transport1_"
 READY
 *set _transport1_ NAK_NCF_RETRIES _50_* 
 READY
 *bind _transport1_* 
 READY
</pre>
</dd><dt>Parameters</dt><dd>
<table border="1" cellpadding="5" cellspacing="0">
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
<tr>
<td><tt>session_name</tt></td>
<td>The transport identifier.</td>
</tr><tr>
<td><tt>retries</tt></td>
<td>Number of retries.</td>
</tr>
</table>
</dd></dl>

=== set NAK_DATA_RETRIES ===
<dl><dt>Syntax</dt><dd>
<pre>
 set _session_name_ NAK_DATA_RETRIES _retries_ 
</pre>
</dd><dt>Purpose</dt><dd>Set <tt>NAK_DATA_RETRIES</tt>, the maximum number of times to wait for repair data before cancelling NAK generation.
</dd><dt>Remarks</dt><dd>Example output:
<pre>
 *create _transport1_* 
 created new session "_transport1_"
 READY
 *set _transport1_ NAK_DATA_RETRIES _1000_* 
 READY
 *bind _transport1_* 
 READY
</pre>
</dd><dt>Parameters</dt><dd>
<table border="1" cellpadding="5" cellspacing="0">
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
<tr>
<td><tt>session_name</tt></td>
<td>The transport identifier.</td>
</tr><tr>
<td><tt>retries</tt></td>
<td>Number of retries.</td>
</tr>
</table>
</dd></dl>

=== set TXW_MAX_RTE ===
<dl><dt>Syntax</dt><dd>
<pre>
 set _session_name_ TXW_MAX_RTE _rate_
</pre>
</dd><dt>Purpose</dt><dd>Set sender maximum cumulative transmission rate.
</dd><dt>Remarks</dt><dd>Example output for setting a rate of 1KBps:
<pre>
 *create _transport1_* 
 created new session "transport1"
 READY
 *set _transport1_ TXW_MAX_RTE _1000_* 
 READY
 *bind _transport1_* 
 READY
</pre>
</dd><dt>Parameters</dt><dd>
<table border="1" cellpadding="5" cellspacing="0">
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
<tr>
<td><tt>session_name</tt></td>
<td>The transport identifier.</td>
</tr><tr>
<td><tt>rate</tt></td>
<td>Transmission rate in bytes per second.</td>
</tr>
</table>
</dd></dl>

=== set FEC ===
<dl><dt>Syntax</dt><dd>
<pre>
 set _session_name_ FEC RS(_n_, _k_)
</pre>
</dd><dt>Purpose</dt><dd>Enable Reed-Solomon FEC engine and set RS code.
</dd><dt>Remarks</dt><dd>Example output for using a RS(255,64) code:
<pre>
 *create _transport1_* 
 created new session "transport1"
 READY
 *set _transport1_ FEC RS(_255_, _64_)
 READY
 *bind _transport1_* 
 READY
</pre>
</dd><dt>Parameters</dt><dd>
<table border="1" cellpadding="5" cellspacing="0">
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
<tr>
<td><tt>session_name</tt></td>
<td>The transport identifier.</td>
</tr><tr>
<td><tt>n</tt></td>
<td>FEC Block length.</td>
</tr><tr>
<td><tt>k</tt></td>
<td>Transmission Group length.</td>
</tr>
</table>
</dd></dl>

== Simulator ==
<dl><dt>Purpose</dt><dd>A host which can send and receive PGM packets in order to illicit a response from the application under test. 
</dd><dt>Syntax</dt><dd>
<pre>
 sim `[`-n _network_`]` 
     `[`-s _service_`]` 
</pre>
</dd><dt>Remarks</dt><dd>Control is provided by standard input with feedback to standard output, the available commands follow in alphabetical order.  After an input command is processed and is ready to accept another command the output "<tt>READY</tt>" is displayed.
</dd></dl>

=== bind ===
See <tt>[#bind Application/bind]</tt>.


=== set FEC ===
See <tt>[#setFec Application/set FEC]</tt>.


=== create ===
<dl><dt>Syntax</dt><dd>
<pre>
 create `[` _fake_ `]` _session_name_ 
</pre>
</dd><dt>Purpose</dt><dd>Create a new transport.
</dd><dt>Remarks</dt><dd>A fake transport is necessary framework for sending PGM protocol packets in an absolute controlled manner.  SPMs will not be automatically published, and NAKs will be not be generated on detected data loss.

Example output for creating a fake session:
<pre>
 *create fake* transport1
 READY
</pre>

See <tt>[#create Application/create]</tt>.
</dd></dl>

=== destroy ===
See <tt>[#destroy Application/destroy]</tt>.


=== net send data ===
<dl><dt>Syntax</dt><dd>
<pre>
 net send odata _session_name_ _sequence_number_ _txw_trail_ _string_ 
 net send rdata _session_name_ _sequence_number_ _txw_trail_ _string_ 
</pre>
</dd><dt>Purpose</dt><dd>Send an ODATA or RDATA packet with specified sequence number and TXW_TRAIL.
</dd><dt>Remarks</dt><dd>Example output:
<pre>
 *net send odata _transport1 401 400 ringo_* 
 READY
</pre>
</dd><dt>Parameters</dt><dd>
<table border="1" cellpadding="5" cellspacing="0">
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
<tr>
<td><tt>session_name</tt></td>
<td>The transport identifier.</td>
</tr><tr>
<td><tt>sequence_number</tt></td>
<td>Packet sequence number to request re-transmission of.</td>
</tr><tr>
<td><tt>txw_trail</tt></td>
<td>TXW_TRAIL: the trailing edge of the transmit window.</td>
</tr><tr>
<td><tt>string</tt></td>
<td>An alphanumeric string to send, must not contain any spaces.</td>
</tr>
</table>
</dd></dl>

=== net send parity data ===
<dl><dt>Syntax</dt><dd>
<pre>
 net send parity odata _session_name_ _sequence_number_ _txw_trail_ _strings_ 
 net send parity rdata _session_name_ _sequence_number_ _txw_trail_ _strings_ 
</pre>
</dd><dt>Purpose</dt><dd>Send a parity ODATA (pro-active) or RDATA (on-demand) packet with specified sequence number and TXW_TRAIL.
</dd><dt>Remarks</dt><dd>Example output:
<pre>
 *net send parity rdata _transport1 401 400 ringo ichigo momo budo_* 
 READY
</pre>
</dd><dt>Parameters</dt><dd>
<table border="1" cellpadding="5" cellspacing="0">
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
<tr>
<td><tt>session_name</tt></td>
<td>The transport identifier.</td>
</tr><tr>
<td><tt>sequence_number</tt></td>
<td>Packet sequence number to request re-transmission of.</td>
</tr><tr>
<td><tt>txw_trail</tt></td>
<td>TXW_TRAIL: the trailing edge of the transmit window.</td>
</tr><tr>
<td><tt>string</tt></td>
<td>A list of alphanumeric strings representing the original data block, must not contain any spaces.</td>
</tr>
</table>
</dd></dl>

=== net send nak ===
<dl><dt>Syntax</dt><dd>
<pre>
 net send nak _session_name_ _TSI_ _sequence_number_ [ ,_sequence_number_ ]...
</pre>
</dd><dt>Purpose</dt><dd>Send a NAK to a specified Transport Session Identifier (TSI).
</dd><dt>Remarks</dt><dd>Example output for sending a NAK for sequence number #1 on the transport session _transport1_ to the sender with session identifier "_4.232.81.47.21.115.34649_":
<pre>
 *net send nak _transport1 4.232.81.47.21.115.34649 1_* 
 READY
</pre>
Example sending a list of NAKs for sequence numbers 2,3,4:
<pre>
 *net send nak _transport1 4.232.81.47.21.115.34649 2,3,4_* 
 READY
</pre>
</dd><dt>Parameters</dt><dd>
<table border="1" cellpadding="5" cellspacing="0">
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
<tr>
<td><tt>session_name</tt></td>
<td>The transport identifier.</td>
</tr><tr>
<td><tt>TSI</tt></td>
<td>Transport Session Identifier (TSI).</td>
</tr><tr>
<td><tt>sequence_number</tt></td>
<td>Packet sequence number to request re-transmission of.</td>
</tr>
</table>
</dd></dl>

=== net send spm ===
<dl><dt>Syntax</dt><dd>
<pre>
 net send spm _session_name_ _sequence_number_ _txw_trail_ _txw_lead_ 
</pre>
</dd><dt>Purpose</dt><dd>Send a SPM with specified sequence numbers and transmit window parameters.
</dd><dt>Remarks</dt><dd>Example output:
<pre>
 *net send spm _transport1 60 801 800_* 
 READY
</pre>
</dd><dt>Parameters</dt><dd>
<table border="1" cellpadding="5" cellspacing="0">
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
<tr>
<td><tt>session_name</tt></td>
<td>The transport identifier.</td>
</tr><tr>
<td><tt>sequence_number</tt></td>
<td>Packet sequence number to request re-transmission of.</td>
</tr><tr>
<td><tt>txw_trail</tt></td>
<td>TXW_TRAIL: the trailing edge of the transmit window.</td>
</tr><tr>
<td><tt>txw_lead</tt></td>
<td>TXW_LEAD: the leading edge of the transmit window.</td>
</tr>
</table>
</dd></dl>

=== net send parity spm ===
<dl><dt>Syntax</dt><dd>
<pre>
 net send spm _session_name_ _sequence_number_ _txw_trail_ _txw_lead_ pro-active on-demand _k'
</pre>
</dd><dt>Purpose</dt><dd>Send a parity SPM with specified sequence numbers, transmit window parameters, and which FEC services to advertise.
</dd><dt>Remarks</dt><dd>Example output:
<pre>
 *net send spm _transport1 60 801 800_ on-demand _64_* 
 READY
</pre>
</dd><dt>Parameters</dt><dd>
<table border="1" cellpadding="5" cellspacing="0">
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
<tr>
<td><tt>session_name</tt></td>
<td>The transport identifier.</td>
</tr><tr>
<td><tt>sequence_number</tt></td>
<td>Packet sequence number to request re-transmission of.</td>
</tr><tr>
<td><tt>txw_trail</tt></td>
<td>TXW_TRAIL: the trailing edge of the transmit window.</td>
</tr><tr>
<td><tt>txw_lead</tt></td>
<td>TXW_LEAD: the leading edge of the transmit window.</td>
</tr>
</table>
</dd></dl>

=== net send spmr ===
<dl><dt>Syntax</dt><dd>
<pre>
 net send spmr _session_name_ _TSI_ 
</pre>
</dd><dt>Purpose</dt><dd>Send a SPMR to local multicast segment and unicast to the specified TSI.
</dd><dt>Remarks</dt><dd>Example output:
<pre>
 *net send spmr _transport1 4.232.81.47.21.115.34649_* 
 READY
</pre>
</dd><dt>Parameters</dt><dd>
<table border="1" cellpadding="5" cellspacing="0">
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
<tr>
<td><tt>session_name</tt></td>
<td>The transport identifier.</td>
</tr><tr>
<td><tt>TSI</tt></td>
<td>Transport Session Identifier.</td>
</tr>
</table>
</dd></dl>

=== quit ===
See <tt>[#quit Application/quit]</tt>.

=== send ===
See <tt>[#send Application/send]</tt>.

== Monitor ==
<dl><dt>Purpose</dt><dd>An independent network monitor to verify what is actually sent on the network.
</dd><dt>Syntax</dt><dd>
<pre>
 monitor
</pre>
</dd><dt>Remarks</dt><dd>Control is provided by standard input with feedback to standard output, the available commands follow in alphabetical order.  After an input command is processed and is ready to accept another command the output "<tt>READY</tt>" is displayed.
</dd></dl>

=== filter ===
<dl><dt>Syntax</dt><dd>
<pre>
 filter _IPv4_address_ 
</pre>
</dd><dt>Purpose</dt><dd>Filter out packets that do not matched the provided IP address.
</dd><dt>Remarks</dt><dd>Example output to filter for only packets from the host _10.6.28.31_:
<pre>
 *filter _10.6.28.31_* 
 READY
</pre>
</dd><dt>Parameters</dt><dd>
<table border="1" cellpadding="5" cellspacing="0">
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
<tr>
<td><tt>IPv4_address</tt></td>
<td>A dotted quad IPv4 address.</td>
</tr>
</table>
</dd></dl>

=== quit ===
See <tt>[#quit Application/quit]</tt>.